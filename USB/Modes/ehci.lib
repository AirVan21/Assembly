initEHCI macro
	
; =====================================================================================================
; Temporary BAR information
BAR1 = 0C360A000h
BAR2 = 0C3609000h
BAR3 = 0h 
BAR4 = 0h 


; =====================================================================================================

 	; Prints information about HC I/O Registers 
	;
	; EBX - contains BAR address
	; EDI - contains Video Mem offset (where to print) | Should be the start of the row 
	; FS  - contains Selector For Zero Memory
	; ES  - contains Video Memory Selector
	printEHCIinfo proc near

		push ebx           		; Save ebx
		push edi           		; 
		
		; Show HC Base Address
		;lea bx, HCGreet  		; Address for CapLenMsg
		;sub bx, offset GreetMsg ; Start of DS
		;call printStrPm    		; Print CapLenMsg
		;mov ebx, BAR1      		; Gets BAR1	
								; Print Base Address
		;shr ebx, 16             ;
		;push bx					;
		;call printWordFromStackPM
		;mov ebx, BAR1           ;
		;push bx                 ;
		;call printWordFromStackPM		

		
		;pop edi           		; Recover Print Point
		;add edi, ROWLENGTH 		; Next Row
		;push edi                ; Save updated edi 
		

		; Work with CAPLENGTH
		lea bx, CapLenMsg  		; Address for CapLenMsg
		sub bx, offset GreetMsg ; Start of DS
		call printStrPm    		; Print CapLenMsg
		mov ebx, BAR1      		; Gets BAR1	
		call retrieveCAPLENGTH  ; Write CAPLENGTH for BAR1

		pop edi           		; Recover Print Point
		add edi, ROWLENGTH 		; Next Row
		push edi                ; Save updated edi 
		
		; Work with HCIVERSION 
		lea bx, HCVersion  		; Address for CapLenMsg
		sub bx, offset GreetMsg ; Start of DS
		call printStrPm    		; Print CapLenMsg
		mov ebx, BAR1      		; Gets BAR1	
		call retrieveHCIVERSION ; Write CAPLENGTH for BAR1
		
		pop edi           		; Recover Print Point
		push edi                ; Save original edi 
		add edi, ROWLENGTH 		; Next Row
		
		; Work with HCSPARAMS 
		lea bx, N_PORTS  		; Address for CapLenMsg
		sub bx, offset GreetMsg ; Start of DS
		call printStrPm    		; Print CapLenMsg
		mov ebx, BAR1      		; Gets BAR1	
		call retrieveHCSPARAMS  ; Write CAPLENGTH for BAR1
		
		pop edi                 ; Recover edi
		pop ebx            		; Recover ebx 
		
		ret                		;

	endp

	; Retieves and prints CAPLENGTH
	;
	; EBX - contains Base Address (BAR)
	retrieveCAPLENGTH proc near

		push ax			   		; Save ax
		
		mov al, fs:[ebx]   		;   
		;mov CAPLENGTH, al  		; Writes a CAPLENGTH
						   		; Prints CAPLENGTH
		push ax            		; CAPLENGTH1
		call printWordFromStackPM
		
		pop ax  
 
		ret
	endp

	; Retieves and prints EHCI Revision number 
	;
	; EBX - contains Base Address (BAR)
	retrieveHCIVERSION proc near
		
		push ax			   	    ; Save ax
		push ebx           		; Save ebx 
		
		add ebx, 2         		; Offset for HCIVersion 
		mov ax, fs:[ebx]   		;   
						   		; Prints CAPLENGTH
		push ax            		; CAPLENGTH1
		call printWordFromStackPM
		
		pop ebx          
		pop ax             		; Recover registers
 		
		ret
	endp

	; Retieves and prints EHCI HCSPARAMS register 
	; (In this case Number of ports for current HC)
	;
	; EBX - contains Base Address (BAR)
	retrieveHCSPARAMS proc near
		
		push ax			   	    ; Save ax
		push ebx           		; Save ebx 
		
		add ebx, 4         		; Offset for HCSPARAMS 
		mov eax, dword ptr fs:[ebx]  ;   
						   		; Prints CAPLENGTH
		and ax, 0Fh             ; Only last 4 bits are needed
		push ax            		; CAPLENGTH1
		call printWordFromStackPM
		
		pop ebx          
		pop ax             		; Recover registers
 		
		ret
	endp

endm
